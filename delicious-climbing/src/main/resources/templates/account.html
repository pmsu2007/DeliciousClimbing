<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>회원정보</title>

    <meta name="description" content="맛등산 회원정보" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="/css/setting.css" />
    <link rel="stylesheet" href="/css/account.css" />

    <script defer src="/js/account.js"></script>
    <script
      src="http://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
      crossorigin="anonymous"
    ></script>
    <script src="../static/js/account.js"></script>
    <script src="../static/js/signin.js"></script>
    <link rel="stylesheet" href="../static/css/chattingDetailPage.css">
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="../static/css/account.css">
  </head>
  <body class="container">
  <div th:replace="header :: header"></div>
  <div class="account-container">
    <div class="account_main">
      <!-- Email Component-->
      <div class="account_btn1">
        <div>
          <img id="account_img" src="/img/Email.png" />
        </div>
        <div>
          <p id="account_title">Email</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.email}"></p>
        </div>
      </div>

      <!-- Register Date Component-->
      <div class="account_btn2">
        <div>
          <img id="account_img" src="/img/registersince.png" />
        </div>
        <div>
          <p id="account_title">Register Since</p>
        </div>
        <div>
          <p id="account_detail" th:text="${#strings.substring(user.createdAt, 0, 11)}"></p>
        </div>
      </div>

      <!-- Favorite FamousMountain Component -->
      <div class="account_btn3">
        <div>
          <img id="account_img" src="/img/Favorite Mountain.png" />
        </div>
        <div>
          <p id="account_title">Favorite Mountain</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.famousMountain.mountainName}"></p>
        </div>
      </div>

      <div class="account_btn4">
        <div>
          <img id="account_img" src="/img/NickName.png" />
        </div>
        <div>
          <p id="account_title">Nickname</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.nickname}"></p>
        </div>
      </div>

      <div class="account_btn5">
        <div>
          <img id="account_img" src="/img/Residence.png" />
        </div>
        <div>
          <p id="account_title">Residence</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.address.sidoSigungu}"></p>
        </div>
      </div>
      <div class="account_btn6">
        <div>
          <img id="account_img" src="/img/Preferred Difficulty.png" />
        </div>
        <div>
          <p id="account_title">Preffered Difficulty</p>
        </div>
        <div>
          <p th:if="${user.difficulty} == null" id="account_detail"></p>
          <p th:if="${user.difficulty} != null" id="account_detail" th:text="${user.difficulty.name}"></p>
        </div>
      </div>
      <div class="account_btn7">
        <div>
          <img id="account_img" src="/img/Introduction.png" />
        </div>
        <div>
          <p id="account_title">Introduction</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.introduction}"> </p>
        </div>
      </div>
      <div class="account_btn8">
        <div>
          <img id="account_img" src="/img/Snsid.png" />
        </div>
        <div>
          <p id="account_title">SNS ID</p>
        </div>
        <div>
          <p id="account_detail" th:text="${user.sns}"></p>
        </div>
      </div>
    </div>
    <div class="profile">
      <div th:if="${user.imageUrl == null}">
        <img id="profile_img" src="/img/profile.png" />
      </div>
      <div th:unless="${user.imageUrl == null}">
        <img id="profile_img" th:src="@{/user/image/{filename}(filename=${user.imageUrl})}" />
      </div>
      <div>
        <p id="Name"></p>
      </div>
      <div class="profile_detail_container">
        <div class="profile_detail1">
          <div>
            <img id="profile_detail_img" src="/img/birthday.png" />
          </div>
          <div>
            <p id="profile_title">Birthday</p>
          </div>
          <div>
            <p id="profile_detail3" th:text="${user.birthday}"></p>
          </div>
        </div>
        <div class="profile_detail2">
          <div>
            <img id="profile_detail_img" src="/img/gender.png" />
          </div>
          <div>
            <p id="profile_title">Gender</p>
          </div>
          <div>
            <p id="profile_detail3"th:text="${user.gender.name}"></p>
          </div>
        </div>
      </div>
      <div class="profile_edit" data-modal="#modal">
        <div class="profile_edit_btn">프로필 수정</div>
        <div class="modal" id="modal">
          <div class="modal-menu">
            <div class="modal-menu-item" id="update-info">회원 정보 수정</div>
            <div class="modal-menu-item" id="update-img">
              프로필 이미지 변경
            </div>
            <div class="modal-menu-item" id="update-password">
              비밀번호 변경
            </div>
            <div class="modal-menu-item" id="delete-user">회원 탈퇴</div>
          </div>
          <div class="modal-content">
            <span class="close-button" data-modal="#modal-1">&times;</span>
            <!-- 회원 정보 수정 -->
            <div class="modal-update-info">
              <form th:action="@{/user/update}" th:object="${userDto}" method="post">
                <h1>회원 정보 수정</h1>
                <br />
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">닉네임</label>
                  <input class="modal-input" type="text" th:field="*{nickname}" th:value="${user.nickname}"/><br />
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">소개글</label>
                  <input class="modal-input" type="text" th:field="*{introduction}" th:value="${user.introduction}"/><br />
                  <label></label>
                </div>
                <div class="modal-input-wrap">
                  <label class="modal-label">선호 난이도</label>
                  <select class="modal-select" th:field="*{difficulty}" th:value="${user.difficulty}">
                    <option value="UPPER">상</option>
                    <option value="MIDDLE">중</option>
                    <option value="LOWER">하</option>
                  </select>
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">선호하는 산</label>
                  <select class="modal-select" th:field="*{famousMountainId}" th:value="${user.famousMountain}">
                  </select>
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label" >SNS</label>
                  <input class="modal-input" type="text" th:field="*{sns}" th:value="${user.sns}"/><br />
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">거주지</label>
                  <select class="modal-select" name="addressSiDo" id="addressDo1"></select>
                  <select class="modal-select" name="addressSiGunGu" id="addressCode" th:field="*{addressCode}"></select>
                </div>
                <br />
                <button class="request-button" type="submit">
                  등록
                </button>
              </form>
            </div>
            <!-- 프로필 이미지 변경-->
            <div class="modal-update-img">
              <form th:action="@{/user/update/image}" method="post" enctype="multipart/form-data">
                <h1>프로필 이미지 변경</h1>
                <br />
                <br />
                <div th:if="${user.imageUrl == null}">
                  <img id="upload_profile_img" src="/img/profile.png" />
                </div>
                <div th:unless="${user.imageUrl == null}">
                  <img id="upload_profile_img" th:src="@{/user/image/{filename}(filename=${user.imageUrl})}" />
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label>이미지</label>
                  <input id="profile_img_input" type="file" name="file"/>
                </div>
                <br />
                <button class="request-button" type="submit">
                  등록
                </button>
              </form>
              <br />
            </div>
            <!-- 비밀번호 변경 -->
            <div class="modal-update-password">
              <form id="change-password" th:action="@{/user/update/password}" th:object="${userPassword}" method="post">
                <h1>비밀번호 변경</h1>
                <br />
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">현재 비밀번호</label>
                  <input class="modal-input" type="password" th:field="*{oldPassword}"/>
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">새로운 비밀번호</label>
                  <input class="modal-input" id="newPassword" type="password" th:field="*{newPassword}"/>
                </div>
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">새로운 비밀번호 확인</label>
                  <input class="modal-input" id="check-new-password" type="password"/>
                </div>
                <br/>
                <button id="change-password-btn" class="request-button" type="submit">
                  등록
                </button>
              </form>
            </div>
            <!-- 회원 탈퇴 -->
            <div class="modal-delete-user">
              <form th:action="@{/user/delete}" th:object="${userPassword}" method="post">
                <h1>회원 탈퇴</h1>
                <br />
                <br />
                <div class="modal-input-wrap">
                  <label class="modal-label">현재 비밀번호</label>
                  <input class="modal-input" type="password" th:field="*{oldPassword}"/>
                </div>
                <br/>
                <button class="request-button" type="submit">
                  등록
                </button>
              </form>
            </div>
          </div>
        </div>
        <button class="open-button" data-modal="#modal-1"></button>
      </div>
    </div>
  </div>
  </body>
</html>